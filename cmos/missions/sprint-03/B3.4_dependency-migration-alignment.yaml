missionId: "BI-20251026-304"

objective: "Align dependency analyzer integration tests and migration engine guards with the updated API."

context: |
  Integration suites still rely on the deprecated `outputFormat` parameter for dependency analysis,
  and migration-engine tests dereference `migratedTemplate` without null checks (artifacts/05_coverage_report.json).
  Recommendations R05 and R06 highlight the need to update test fixtures and introduce defensive guards so
  the dependency workflow reflects the current contract.

successCriteria:
  - "`tests/integration/phase4-intelligence-flow.test.ts` uses the new AnalyzeDependenciesArgs and passes."
  - "`tests/versioning/migration-engine.test.ts` guards optional fields and compiles without TS18048."
  - "Additional assertions confirm migration results exist before access."
  - "Updated fixtures/documentation capture the new API expectations."

deliverables:
  - "Refreshed integration and migration test suites."
  - "Supporting fixture updates and inline documentation."

domainFields:
  type: "Build.Implementation.v1"

  researchFoundation:
    - finding: "Integration tests supply removed `outputFormat` property."
      sourceMission: "CSA-20251026"
    - finding: "Migration tests access `migratedTemplate` without guards."
      sourceMission: "CSA-20251026"

  implementationScope:
    coreDeliverable: "Refactor tests/fixtures to match the updated dependency analysis and migration APIs."
    outOfScope:
      - "Changes to production dependency analyzer logic."
      - "Extending versioning features beyond guard clauses."
      - "Additional telemetry instrumentation."

  validationProtocol:
    - validator: "Claude"
      focus: "Review integration flow for coverage of new API contract."
    - validator: "GPT"
      focus: "Verify migration engine guards handle optional fields safely."

  handoffContext:
    completed:
      - "Integration suite updated to new dependency analyzer inputs."
      - "Migration engine tests guarded and passing."
    interfaces:
      - "Fixture: Updated `phase4-intelligence-flow` mission payload."
    assumptions:
      - "Future missions will address telemetry quieting."
    nextMission: "BI-20251026-401: (Future) Tokenizer telemetry hardening."
    blockers: []
