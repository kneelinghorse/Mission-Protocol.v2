{
  "long_files": [
    {
      "file": "src/index.ts",
      "lines": 880,
      "reason": "MCP server wiring and tool registration handled inline."
    },
    {
      "file": "src/intelligence/mission-splitter.ts",
      "lines": 648,
      "reason": "Combines multiple algorithmic phases without separation."
    },
    {
      "file": "src/extraction/template-extractor.ts",
      "lines": 634,
      "reason": "Extraction pipeline and CLI concerns intertwined."
    }
  ],
  "failing_tests": [
    {
      "file": "tests/tools/optimize-tokens.test.ts:235",
      "issue": "Expectations reference optimizeTokensToolDefinition which no longer exists."
    },
    {
      "file": "tests/loaders/yaml-loader.test.ts:59",
      "issue": "Tests dereference unknown typed result; out of sync with SecureYAMLLoader API."
    },
    {
      "file": "tests/versioning/migration-engine.test.ts:727",
      "issue": "Access to migratedTemplate without guards."
    },
    {
      "file": "tests/integration/phase4-intelligence-flow.test.ts:254",
      "issue": "Legacy outputFormat argument removed from AnalyzeDependenciesArgs."
    },
    {
      "file": "tests/import-export/security-validator.test.ts:186",
      "issue": "Assertions assume template.spec.phases typed."
    }
  ],
  "api_drifts": [
    {
      "description": "Tool naming mismatches (update_token_optimization vs optimize_tokens).",
      "reference": "src/tools/optimize-tokens.ts, tests/tools/optimize-tokens.test.ts"
    },
    {
      "description": "Deprecated tool definitions still exported alongside canonical names, increasing maintenance burden.",
      "reference": "src/tools/*.ts"
    }
  ],
  "tooling_gaps": [
    {
      "issue": "No eslint/prettier configuration present; npm scripts reference tools but packages missing.",
      "reference": "package.json:scripts"
    },
    {
      "issue": "No automated complexity or performance profiling in CI; relies on manual inspection.",
      "reference": "package.json, scripts/"
    }
  ],
  "security_followups": [
    {
      "file": "src/tools/split-mission.ts:217",
      "issue": "No safeFilePath usage before reading user-provided mission file."
    },
    {
      "file": "src/tools/optimize-tokens.ts:66",
      "issue": "No path sanitization or rollback for file writes."
    }
  ]
}